\documentclass[../../sets-and-functions.ftl.tex]{subfiles}

\typeout{
  \begin{forthel}
    [readtex FLib/BasicNotions/src/sets-and-functions/sections/01_sets/02_powerset.ftl.tex]
    [readtex FLib/BasicNotions/src/sets-and-functions/sections/02_functions/01_functions.ftl.tex]

    [checkconsistency off]

    [synonym preserve/-s]

    Let $u,v,w$ denote elements.
    Let $x,y,z$ denote sets.
    Let $f,g,h$ denote functions.
  \end{forthel}
}

\begin{document}
  \section{Functions and set-systems}

  \begin{forthel}
    \begin{definition}
      A function between systems of sets is a function $f$ such that $f$ is a function from $X$ to $Y$ for some systems of sets $X, Y$.
    \end{definition}

    \begin{definition}
      Let $f$ be a function between systems of sets.
      $f$ preserves subsets iff for all $x,y \in \dom(f)$ if $x \subseteq y$ then $f(x) \subseteq f(y)$.
    \end{definition}

    \begin{definition}
      Let $f$ be a function between systems of sets.
      $f$ preserves supersets iff for all $x,y \in \dom(f)$ if $x \supseteq y$ then $f(x) \supseteq f(y)$.
    \end{definition}

    \begin{lemma}
      Let $f$ be a function between systems of sets.
      Then $f$ preserves subsets iff $f$ preserves supersets.
    \end{lemma}
    \begin{proof}
      Case $f$ preserves subsets.
        Let $x,y \in \dom(f)$.
        Assume $x \supseteq y$.
        Then $y \subseteq x$.
        Hence $f(y) \subseteq f(x)$.
        Thus $f(x) \supseteq f(y)$.
      End.

      Case $f$ preserves supersets.
        Let $x,y \in \dom(f)$.
        Assume $x \subseteq y$.
        Then $y \supseteq x$.
        Hence $f(y) \supseteq f(x)$.
        Thus $f(x) \subseteq f(y)$.
      End.
    \end{proof}

    \begin{theorem}[SF 01 05 636019]
      Let $h$ be a function from $\pow(x)$ to $\pow(x)$ that preserves subsets.
      Then $h$ has a fixed point.
    \end{theorem}
    \begin{proof}
      (1) Define $A = \{ y \subseteq x \mid y \subseteq h(y) \}$.
      Then $A$ is a subset of $\pow(x)$ (by separation).
      We have $\bigcup A \in \pow(x)$.

      Let us show that (2) $\bigcup A \subseteq h(\bigcup A)$.
        Let $u \in \bigcup A$.
        Take $y \in A$ such that $u \in y$.
        Then $u \in h(y)$.
        We have $y \subseteq \bigcup A$.
        Hence $h(y) \subseteq h(\bigcup A)$.
        Thus $h(y) \subseteq h(\bigcup A)$.
        Therefore $u \in h(\bigcup A)$.
      End.

      Then $h(\bigcup A) \in A$ (by 1).
      (3) Hence $h(\bigcup A) \subseteq \bigcup A$.
      Indeed every element of $h(\bigcup A)$ is an element of some element of $A$.

      Thus $h(\bigcup A) = \bigcup A$ (by 2, 3).
    \end{proof}
  \end{forthel}
\end{document}
